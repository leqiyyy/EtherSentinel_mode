<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高级工具 - EtherSentinel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --dark-bg: #0a0e1a;
            --card-bg: rgba(16, 20, 31, 0.8);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --neon-cyan: #00ffcc;
            --neon-blue: #00d4ff;
            --neon-orange: #ff6b35;
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --danger-red: #ff004d;
            --shadow-glow: 0 8px 32px rgba(0, 255, 204, 0.1);
            --blockchain-green: #39ff14;
            --cyber-purple: #8a2be2;
            --matrix-green: #00ff41;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
            font-weight: 400;
            line-height: 1.6;
            letter-spacing: 0.5px;
        }

        /* 优化字体排版 */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            line-height: 1.3;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }

        p, span, div {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 400;
            line-height: 1.7;
            letter-spacing: 0.3px;
        }

        .text-enhanced {
            font-weight: 500;
            letter-spacing: 0.8px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .subtitle-enhanced {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 500;
            font-size: 1.1rem;
            line-height: 1.6;
            letter-spacing: 0.5px;
            opacity: 0.9;
        }

        .content-text {
            font-size: 1.05rem;
            line-height: 1.8;
            letter-spacing: 0.4px;
            font-weight: 400;
        }

        /* 增强的区块链科技背景 */
        .cyber-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -5;
            background: 
                radial-gradient(circle at 20% 50%, rgba(0, 255, 204, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(138, 43, 226, 0.08) 0%, transparent 50%),
                linear-gradient(125deg, #0a0e1a 0%, #1a1f35 50%, #0a0e1a 100%);
        }

        /* 动态网格背景 */
        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 204, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 204, 0.1) 1px, transparent 1px),
                linear-gradient(rgba(0, 255, 204, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 204, 0.05) 1px, transparent 1px);
            background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
            z-index: -4;
            opacity: 0.4;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(100px, 100px); }
        }

        /* 粒子效果背景 */
        .particles-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: var(--neon-cyan);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.6;
            animation: float 15s linear infinite;
        }

        .particle:nth-child(odd) {
            background: var(--neon-blue);
            animation-duration: 20s;
        }

        .particle:nth-child(3n) {
            background: var(--blockchain-green);
            animation-duration: 25s;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100px) scale(1);
                opacity: 0;
            }
        }

        /* 区块链数据流 */
        .blockchain-streams {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.1;
        }

        .data-stream {
            position: absolute;
            width: 2px;
            height: 100px;
            background: linear-gradient(to bottom, 
                transparent, 
                var(--matrix-green), 
                transparent);
            animation: dataFlow 8s linear infinite;
        }

        @keyframes dataFlow {
            0% {
                transform: translateY(-100px);
                opacity: 0;
            }
            10%, 90% {
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        /* 主要内容 */
        .main-content {
            margin-top: 80px;
            padding: 1.5rem;
            position: relative;
            z-index: 1;
        }

        /* 主要容器 */
        .main-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
            max-width: 1600px;
            margin-left: auto;
            margin-right: auto;
            min-height: calc(100vh - 120px);
        }

        /* 页面标题区域 */
        .page-header {
            background: linear-gradient(135deg, 
                rgba(0, 255, 204, 0.1) 0%, 
                rgba(0, 212, 255, 0.05) 50%,
                rgba(138, 43, 226, 0.1) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 255, 204, 0.2);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 8px 32px rgba(0, 255, 204, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, 
                transparent, 
                rgba(0, 255, 204, 0.1), 
                transparent);
            animation: rotate 20s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .page-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--neon-cyan);
            margin-bottom: 1rem;
            text-shadow: 0 0 30px rgba(0, 255, 204, 0.5);
            position: relative;
            z-index: 1;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 0;
            position: relative;
            z-index: 1;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 500;
            line-height: 1.6;
            letter-spacing: 0.8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* 侧边栏导航 */
        .tools-sidebar {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            height: fit-content;
        }

        .sidebar-title {
            font-family: 'Orbitron', monospace;
            color: var(--neon-cyan);
            margin-bottom: 2rem;
            font-size: 1.3rem;
            text-align: center;
        }

        .tools-menu {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .tool-menu-item {
            margin-bottom: 0.5rem;
        }

        .tool-menu-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .tool-menu-link:hover,
        .tool-menu-link.active {
            color: var(--neon-cyan);
            background: rgba(0, 255, 204, 0.1);
            border-color: rgba(0, 255, 204, 0.3);
            transform: translateX(5px);
        }

        .tool-menu-icon {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        .tool-menu-text {
            font-weight: 500;
            font-size: 0.95rem;
        }

        /* 内容区域 */
        .tool-content-area {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            min-height: 600px;
        }

        .tool-section {
            display: none;
        }

        .tool-section.active {
            display: block;
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tool-section-title {
            font-family: 'Orbitron', monospace;
            color: var(--neon-cyan);
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tool-description {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.8;
            font-size: 1.05rem;
            padding: 1rem;
            background: rgba(0, 255, 204, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 204, 0.1);
        }

        /* 表单和按钮样式 */

        /* 表单样式 */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 0.8rem;
            display: block;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-control, .form-select {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(0, 255, 204, 0.2);
            border-radius: 12px;
            color: var(--text-primary);
            padding: 0.75rem 1rem;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .form-control:focus, .form-select:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--neon-cyan);
            box-shadow: 
                0 0 0 0.2rem rgba(0, 255, 204, 0.25),
                0 0 20px rgba(0, 255, 204, 0.1);
            color: var(--text-primary);
            outline: none;
        }

        .form-control::placeholder {
            color: var(--text-secondary);
            opacity: 0.7;
        }

        .form-select option {
            background: var(--dark-bg);
            color: var(--text-primary);
        }

        /* 统计面板样式 */
        .stats-panel {
            background: rgba(0, 255, 204, 0.05);
            border: 1px solid rgba(0, 255, 204, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--neon-cyan);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* 快速操作按钮 */
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        /* AI状态指示器 */
        .ai-status {
            background: linear-gradient(135deg, 
                rgba(0, 255, 204, 0.05) 0%, 
                rgba(0, 0, 0, 0.2) 100%);
            border-radius: 12px;
            padding: 1rem;
            border: 1px solid rgba(0, 255, 204, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .ai-status:hover {
            border-color: rgba(0, 255, 204, 0.4);
            box-shadow: 0 4px 20px rgba(0, 255, 204, 0.1);
        }

        /* 统一状态指示器样式 - 与导航栏保持一致 */
        .ai-status-indicator {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.6rem 1.2rem;
            background: rgba(0, 255, 204, 0.08);
            border: 1px solid rgba(0, 255, 204, 0.2);
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 120px;
            justify-content: center;
        }

        .ai-status-indicator:hover {
            background: rgba(0, 255, 204, 0.15);
            border-color: rgba(0, 255, 204, 0.4);
        }

        .ai-status-dot {
            width: 8px;
            height: 8px;
            background: var(--neon-cyan);
            border-radius: 50%;
            animation: pulse 2s infinite;
            box-shadow: 0 0 10px var(--neon-cyan);
            flex-shrink: 0;
        }

        @keyframes pulse {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1);
            }
            50% { 
                opacity: 0.7; 
                transform: scale(1.1);
            }
        }

        @keyframes ripple {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        /* 聊天界面增强 */
        .chat-message {
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 10px;
            animation: fadeIn 0.3s ease-out;
        }

        .message-header {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .message-content {
            line-height: 1.6;
        }

        .message-content ul {
            padding-left: 1.2rem;
        }

        .chat-input-area {
            border-top: 1px solid rgba(0, 255, 204, 0.2);
            padding-top: 1rem;
            margin-top: 1rem;
        }

        .input-group .btn-tool {
            border-radius: 0 12px 12px 0;
            border-left: none;
            padding: 0.75rem 1.5rem;
        }

        .chat-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        /* 代码编辑器样式 */
        .code-editor-container {
            position: relative;
            border: 2px solid rgba(0, 255, 204, 0.2);
            border-radius: 12px;
            overflow: hidden;
        }

        .code-editor {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            border: none;
            border-radius: 0;
            resize: vertical;
            min-height: 300px;
        }

        .code-stats {
            position: absolute;
            bottom: 10px;
            right: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: var(--text-secondary);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-family: 'Orbitron', monospace;
        }

        /* 审计选项样式 */
        .audit-options {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 1rem;
        }

        .form-check {
            margin-bottom: 0.5rem;
        }

        .form-check-input:checked {
            background-color: var(--neon-cyan);
            border-color: var(--neon-cyan);
        }

        .form-check-label {
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        /* 进度条增强 */
        .progress-text {
            text-align: center;
            margin-top: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-family: 'Orbitron', monospace;
        }

        /* 按钮样式 */
        .btn-tool {
            background: linear-gradient(45deg, 
                var(--neon-cyan), 
                var(--neon-blue));
            border: none;
            color: #000;
            font-weight: 600;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 255, 204, 0.3);
        }

        .btn-tool::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.5s ease;
        }

        .btn-tool:hover::before {
            left: 100%;
        }

        .btn-tool:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 204, 0.4);
            color: #000;
        }

        .btn-tool:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* 结果区域 */
        .result-section {
            background: linear-gradient(135deg, 
                rgba(0, 255, 204, 0.05) 0%, 
                rgba(0, 212, 255, 0.03) 100%);
            border: 1px solid rgba(0, 255, 204, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            backdrop-filter: blur(15px);
            display: none;
        }

        .result-section.show {
            display: block;
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-title {
            color: var(--neon-cyan);
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }

        .result-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(0, 255, 204, 0.3);
        }

        /* 检测摘要样式 */
        .detection-summary {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 1rem;
        }

        .summary-item {
            text-align: center;
        }

        .summary-number {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .summary-label {
            color: var(--text-secondary);
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .result-address {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .result-status {
            display: flex;
            align-items: center;
        }

        .result-details {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* 加载动画 */
        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #000;
            animation: spin 1s ease-in-out infinite;
            margin-right: 0.5rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* AI助手特殊样式 */
        .ai-chat {
            max-height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .chat-message {
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 10px;
        }

        .user-message {
            background: rgba(0, 255, 204, 0.1);
            text-align: right;
            margin-left: 2rem;
        }

        .ai-message {
            background: rgba(255, 255, 255, 0.05);
            margin-right: 2rem;
        }

        /* 进度条 */
        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 8px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-blue));
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 1rem;
                padding: 1rem;
            }
            
            .tools-sidebar {
                order: 2;
                padding: 1.5rem;
            }
            
            .tool-content-area {
                order: 1;
                padding: 1.5rem;
                min-height: 400px;
            }

            .page-title {
                font-size: 2rem;
            }

            .page-header {
                padding: 1.5rem;
                margin-bottom: 1.5rem;
            }

            .sidebar-title {
                font-size: 1.1rem;
                margin-bottom: 1rem;
            }

            .tool-menu-link {
                padding: 0.75rem;
                font-size: 0.9rem;
            }

            /* AI状态指示器移动端优化 */
            .ai-status {
                padding: 0.75rem;
            }

            .ai-status .d-flex {
                flex-direction: column;
                align-items: flex-start !important;
                gap: 0.5rem;
            }

            .ai-status .text-secondary {
                margin-top: 0 !important;
                font-size: 0.85rem;
            }

            .ai-status-indicator {
                padding: 0.5rem 1rem;
                font-size: 0.85rem;
                min-width: 110px;
                gap: 0.5rem;
            }

            .ai-status-dot {
                width: 6px;
                height: 6px;
            }
        }

        @media (max-width: 1200px) {
            .main-container {
                max-width: 100%;
                padding: 0 1rem;
            }
        }

        @media (max-width: 992px) {
            /* 平板端AI状态指示器优化 */
            .ai-status .text-secondary {
                font-size: 0.9rem;
            }

            .ai-status-indicator {
                padding: 0.5rem 1rem;
                font-size: 0.85rem;
                gap: 0.5rem;
                min-width: 100px;
            }

            .ai-status-dot {
                width: 6px;
                height: 6px;
            }
        }

        /* 576px以下 - 保持文字显示但缩小尺寸 */
        @media (max-width: 576px) {
            .ai-status-indicator {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
                gap: 0.4rem;
                min-width: 90px;
            }

            .ai-status-dot {
                width: 6px;
                height: 6px;
            }
        }

        /* 超小屏幕（480px以下）才隐藏文字 */
        @media (max-width: 480px) {
            .ai-status-indicator {
                padding: 0.3rem 0.6rem;
                min-width: auto;
                justify-content: center;
            }

            .ai-status-indicator span {
                display: none;
            }

            .ai-status-dot {
                width: 8px;
                height: 8px;
            }
        }

        /* 时间戳样式 */
        .timestamp {
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-family: 'Orbitron', monospace;
            margin-top: 1rem;
            text-align: right;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <!-- 增强的背景系统 -->
    <div class="cyber-background"></div>
    <div class="grid-overlay"></div>
    <div class="particles-bg" id="particlesBg"></div>
    <div class="blockchain-streams" id="blockchainStreams"></div>

    <!-- 引入统一导航栏 -->
    <div id="navbar-placeholder"></div>

    <!-- 主要内容 -->
    <div class="main-content">
        <div class="container-fluid">
            <!-- 页面标题 -->
            <div class="page-header">
                <h1 class="page-title">
                    <i class="bi bi-tools"></i>
                    高级工具
                </h1>
                <p class="page-subtitle subtitle-enhanced">专业的区块链安全分析与智能化工具集</p>
            </div>
            
            <!-- 主要容器 -->
            <div class="main-container">
                <!-- 工具导航栏 -->
                <div class="tools-sidebar">
                    <h3 class="sidebar-title">工具菜单</h3>
                    <ul class="tools-menu">
                        <li class="tool-menu-item">
                            <a href="#" class="tool-menu-link active" data-tool="batch-detection">
                                <i class="bi bi-list-check tool-menu-icon"></i>
                                <span class="tool-menu-text">批量地址检测</span>
                    </a>
                </li>
                        <li class="tool-menu-item">
                            <a href="#" class="tool-menu-link" data-tool="ai-assistant">
                                <i class="bi bi-robot tool-menu-icon"></i>
                                <span class="tool-menu-text">AI安全助手</span>
                    </a>
                </li>
                        <li class="tool-menu-item">
                            <a href="#" class="tool-menu-link" data-tool="contract-audit">
                                <i class="bi bi-shield-exclamation tool-menu-icon"></i>
                                <span class="tool-menu-text">合约代码审计</span>
                    </a>
                </li>
                        <li class="tool-menu-item">
                            <a href="#" class="tool-menu-link" data-tool="network-monitor">
                                <i class="bi bi-activity tool-menu-icon"></i>
                                <span class="tool-menu-text">网络监控</span>
                            </a>
                        </li>
                        <li class="tool-menu-item">
                            <a href="#" class="tool-menu-link" data-tool="threat-intel">
                                <i class="bi bi-exclamation-triangle tool-menu-icon"></i>
                                <span class="tool-menu-text">威胁情报</span>
                            </a>
                        </li>
                        <li class="tool-menu-item">
                            <a href="#" class="tool-menu-link" data-tool="report-generator">
                                <i class="bi bi-file-text tool-menu-icon"></i>
                                <span class="tool-menu-text">安全报告生成</span>
                            </a>
                        </li>
                        <li class="tool-menu-item">
                            <a href="#" class="tool-menu-link" data-tool="forensic-analysis">
                                <i class="bi bi-search tool-menu-icon"></i>
                                <span class="tool-menu-text">区块链取证</span>
                            </a>
                        </li>
                        <li class="tool-menu-item">
                            <a href="#" class="tool-menu-link" data-tool="wallet-security">
                                <i class="bi bi-wallet2 tool-menu-icon"></i>
                                <span class="tool-menu-text">钱包安全评估</span>
                            </a>
                        </li>
                        <li class="tool-menu-item">
                            <a href="#" class="tool-menu-link" data-tool="dapp-scanner">
                                <i class="bi bi-globe tool-menu-icon"></i>
                                <span class="tool-menu-text">DApp安全扫描</span>
                    </a>
                </li>
            </ul>
                </div>

                <!-- 工具内容区域 -->
                <div class="tool-content-area">
                    <!-- 批量地址检测 -->
                    <div id="batch-detection-section" class="tool-section active">
                        <h2 class="tool-section-title">
                            <i class="bi bi-list-check"></i>
                            批量地址检测
                        </h2>
                        <div class="tool-description">
                            一次性检测多个以太坊地址的安全风险，支持批量导入和结果导出，提高检测效率。支持CSV导入导出，最多可同时检测100个地址。
                </div>
                        
                        <!-- 快速操作面板 -->
                        <div class="quick-actions mb-3">
                            <div class="row">
                                <div class="col-md-6">
                                    <button class="btn-outline btn-sm w-100" onclick="loadSampleAddresses()">
                                        <i class="bi bi-file-text me-1"></i>加载示例地址
                                    </button>
                    </div>
                                <div class="col-md-6">
                                    <button class="btn-outline btn-sm w-100" onclick="clearAddresses()">
                                        <i class="bi bi-trash me-1"></i>清空地址
                                    </button>
                </div>
            </div>
        </div>
                        
                        <!-- 统计信息 -->
                        <div class="stats-panel mb-3">
                            <div class="row text-center">
                                <div class="col-4">
                                    <div class="stat-item">
                                        <div class="stat-number" id="addressCount">0</div>
                                        <div class="stat-label">待检测地址</div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="stat-item">
                                        <div class="stat-number text-success" id="safeCount">0</div>
                                        <div class="stat-label">安全地址</div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="stat-item">
                                        <div class="stat-number text-danger" id="riskCount">0</div>
                                        <div class="stat-label">风险地址</div>
                                    </div>
                                </div>
                            </div>
            </div>

                        <div class="form-group">
                            <label for="batchAddresses" class="form-label">
                                地址列表 
                                <span class="text-secondary">（每行一个地址，支持粘贴或拖拽CSV文件）</span>
                            </label>
                            <textarea class="form-control" id="batchAddresses" rows="6" 
                                      placeholder="例如：&#10;0x742C4F3d6067182bb16C1AfA465C4c40dF4a123A&#10;0x8BA1f109551bD432803012645Hac136c8C0E1A&#10;0x5aAeb6053F3E94C9b9A09f33669435E7Ef1BeAed&#10;&#10;提示：可以直接粘贴从Excel或CSV复制的地址列表"
                                      oninput="updateAddressCount()"></textarea>
                            <div class="form-text text-secondary mt-2">
                                <i class="bi bi-info-circle me-1"></i>
                                支持格式：以太坊地址(0x开头)、ENS域名、批量CSV导入
                </div>
                </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="detectionMode" class="form-label">检测模式</label>
                                <select class="form-select" id="detectionMode">
                                    <option value="standard">标准检测（推荐）</option>
                                    <option value="fast">快速检测</option>
                                    <option value="deep">深度检测</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="outputFormat" class="form-label">导出格式</label>
                                <select class="form-select" id="outputFormat">
                                    <option value="json">JSON格式</option>
                                    <option value="csv">CSV格式</option>
                                    <option value="excel">Excel格式</option>
                                </select>
                </div>
            </div>

                        <button class="btn-tool me-2" onclick="runBatchCheck()">
                            <span id="batchBtnText">
                                <i class="bi bi-play-circle me-1"></i>开始批量检测
                            </span>
                            <div id="batchLoading" class="loading-spinner" style="display: none;"></div>
                        </button>
                        
                        <button class="btn-outline" onclick="downloadResults()" id="downloadBtn" style="display: none;">
                            <i class="bi bi-download me-1"></i>下载结果
                        </button>
                        
                        <div class="progress-container" id="batchProgress" style="display: none;">
                            <div class="progress-bar" id="batchProgressBar"></div>
                            <div class="progress-text" id="progressText">准备检测...</div>
                </div>
                        
                        <div id="batchResult" class="result-section">
                            <div class="result-title">
                                <i class="bi bi-shield-check"></i>检测结果
                </div>
                            <div id="batchResultContent"></div>
                            <div class="timestamp" id="batchTimestamp"></div>
                </div>
            </div>

                    <!-- AI安全助手 -->
                    <div id="ai-assistant-section" class="tool-section">
                        <h2 class="tool-section-title">
                            <i class="bi bi-robot"></i>
                            AI安全助手
                        </h2>
                        <div class="tool-description">
                            智能AI助手为您答疑解惑，提供专业的区块链安全建议和最佳实践指导。基于最新威胁情报和安全知识库训练。
                </div>
                        
                        <!-- 快速问题模板 -->
                        <div class="quick-questions mb-3">
                            <label class="form-label">
                                <i class="bi bi-lightning"></i>快速提问
                            </label>
                            <div class="row">
                                <div class="col-md-6 mb-2">
                                    <button class="btn-outline btn-sm w-100" onclick="askQuickQuestion('如何识别钓鱼网站？')">
                                        <i class="bi bi-shield-exclamation me-1"></i>如何识别钓鱼网站？
                                    </button>
                </div>
                                <div class="col-md-6 mb-2">
                                    <button class="btn-outline btn-sm w-100" onclick="askQuickQuestion('这个地址安全吗？')">
                                        <i class="bi bi-search me-1"></i>这个地址安全吗？
                                    </button>
                                </div>
                                <div class="col-md-6 mb-2">
                                    <button class="btn-outline btn-sm w-100" onclick="askQuickQuestion('如何保护我的钱包？')">
                                        <i class="bi bi-wallet2 me-1"></i>如何保护我的钱包？
                                    </button>
                                </div>
                                <div class="col-md-6 mb-2">
                                    <button class="btn-outline btn-sm w-100" onclick="askQuickQuestion('DeFi项目风险评估')">
                                        <i class="bi bi-graph-up me-1"></i>DeFi项目风险评估
                                    </button>
                                </div>
                </div>
            </div>

                        <!-- AI状态指示器 -->
                        <div class="ai-status mb-3">
                            <div class="d-flex align-items-center justify-content-between flex-wrap">
                                <div class="ai-status-indicator">
                                    <div class="ai-status-dot"></div>
                                    <span>AI助手在线</span>
                                </div>
                                <div class="text-secondary mt-2 mt-md-0 small">
                                    <i class="bi bi-cpu me-1"></i>
                                    响应时间：<span id="responseTime" class="text-info">~1.2s</span>
                                </div>
                            </div>
                        </div>
                        
                        <div id="aiChat" class="ai-chat">
                            <div class="chat-message ai-message">
                                <div class="message-header">
                                    <i class="bi bi-robot me-2"></i>
                                    <strong>EtherSentinel AI</strong>
                                    <span class="timestamp ms-auto">${new Date().toLocaleTimeString()}</span>
                                </div>
                                <div class="message-content">
                                    您好！我是EtherSentinel AI助手，专注于区块链安全领域。我可以帮助您：
                                    <ul class="mt-2 mb-0">
                                        <li>识别和分析安全威胁</li>
                                        <li>提供钱包安全建议</li>
                                        <li>解答DeFi风险问题</li>
                                        <li>分析交易和合约安全</li>
                                    </ul>
                                    请问有什么可以帮助您的吗？
                                </div>
            </div>
        </div>

                        <div class="chat-input-area">
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="aiInput" 
                                           placeholder="请输入您的问题...支持地址查询、安全咨询等" 
                                           onkeypress="handleAIEnter(event)"
                                           maxlength="500">
                                    <button class="btn-tool input-group-text" onclick="sendAIMessage()">
                                        <span id="aiBtnText">
                                            <i class="bi bi-send"></i>
                                        </span>
                                        <div id="aiLoading" class="loading-spinner" style="display: none;"></div>
                    </button>
                                </div>
                                <div class="form-text text-secondary mt-1">
                                    <i class="bi bi-info-circle me-1"></i>
                                    提示：可以直接粘贴地址或交易哈希进行安全分析
                                </div>
                            </div>
                            
                            <!-- 对话操作 -->
                            <div class="chat-actions mt-2">
                                <button class="btn-outline btn-sm me-2" onclick="clearChat()">
                                    <i class="bi bi-trash me-1"></i>清空对话
                                </button>
                                <button class="btn-outline btn-sm me-2" onclick="exportChat()">
                                    <i class="bi bi-download me-1"></i>导出对话
                                </button>
                                <button class="btn-outline btn-sm" onclick="toggleSmartSuggestions()">
                                    <i class="bi bi-lightbulb me-1"></i>智能建议
                    </button>
                </div>
            </div>
                    </div>
                    
                    <!-- 合约代码审计 -->
                    <div id="contract-audit-section" class="tool-section">
                        <h2 class="tool-section-title">
                            <i class="bi bi-shield-exclamation"></i>
                            合约代码审计
                        </h2>
                        <div class="tool-description">
                            深度分析智能合约代码，检测潜在的安全漏洞和风险点，提供详细的审计报告。支持Solidity、Vyper等主流合约语言。
                    </div>

                        <!-- 合约信息面板 -->
                        <div class="contract-info mb-3">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="info-item">
                                        <label for="contractLanguage" class="form-label">合约语言</label>
                                        <select class="form-select" id="contractLanguage">
                                            <option value="solidity">Solidity</option>
                                            <option value="vyper">Vyper</option>
                                            <option value="auto">自动检测</option>
                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="info-item">
                                        <label for="contractVersion" class="form-label">编译器版本</label>
                                        <select class="form-select" id="contractVersion">
                                            <option value="latest">最新版本</option>
                                            <option value="0.8.19">0.8.19</option>
                                            <option value="0.8.18">0.8.18</option>
                                            <option value="0.7.6">0.7.6</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="info-item">
                                        <label for="auditLevel" class="form-label">审计深度</label>
                                        <select class="form-select" id="auditLevel">
                                            <option value="basic">基础审计</option>
                                            <option value="standard" selected>标准审计</option>
                                            <option value="comprehensive">全面审计</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                    </div>

                        <!-- 快速操作 -->
                        <div class="contract-actions mb-3">
                            <div class="row">
                                <div class="col-md-4">
                                    <button class="btn-outline btn-sm w-100" onclick="loadSampleContract()">
                                        <i class="bi bi-file-code me-1"></i>加载示例合约
                                    </button>
                    </div>
                                <div class="col-md-4">
                                    <button class="btn-outline btn-sm w-100" onclick="formatCode()">
                                        <i class="bi bi-braces me-1"></i>格式化代码
                                    </button>
                                </div>
                                <div class="col-md-4">
                                    <button class="btn-outline btn-sm w-100" onclick="validateSyntax()">
                                        <i class="bi bi-check-circle me-1"></i>语法检查
                                    </button>
                </div>
            </div>
        </div>

                        <div class="form-group">
                            <label for="contractCode" class="form-label">
                                合约代码
                                <span class="text-secondary">（支持拖拽.sol文件或直接粘贴代码）</span>
                            </label>
                            <div class="code-editor-container">
                                <textarea class="form-control code-editor" id="contractCode" rows="12" 
                                          placeholder="// SPDX-License-Identifier: MIT&#10;pragma solidity ^0.8.0;&#10;&#10;contract MyContract {&#10;    mapping(address => uint256) public balances;&#10;    &#10;    function deposit() public payable {&#10;        balances[msg.sender] += msg.value;&#10;    }&#10;    &#10;    function withdraw(uint256 amount) public {&#10;        require(balances[msg.sender] >= amount);&#10;        balances[msg.sender] -= amount;&#10;        payable(msg.sender).transfer(amount);&#10;    }&#10;}"
                                          oninput="updateCodeStats()"></textarea>
                                <div class="code-stats">
                                    <span id="codeLines">0 行</span> | 
                                    <span id="codeChars">0 字符</span> | 
                                    <span id="codeFunctions">0 函数</span>
                                </div>
                            </div>
                            <div class="form-text text-secondary mt-2">
                                <i class="bi bi-info-circle me-1"></i>
                                支持语法高亮、自动完成、实时语法检查
                            </div>
            </div>

                        <!-- 审计选项 -->
                        <div class="audit-options mb-3">
                            <label class="form-label">审计检查项目</label>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkReentrancy" checked>
                                        <label class="form-check-label" for="checkReentrancy">
                                            重入攻击检测
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkOverflow" checked>
                                        <label class="form-check-label" for="checkOverflow">
                                            整数溢出检测
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkAccess" checked>
                                        <label class="form-check-label" for="checkAccess">
                                            访问控制检查
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkGas" checked>
                                        <label class="form-check-label" for="checkGas">
                                            Gas优化建议
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkLogic">
                                        <label class="form-check-label" for="checkLogic">
                                            业务逻辑审查
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkBestPractices">
                                        <label class="form-check-label" for="checkBestPractices">
                                            最佳实践检查
                                        </label>
                                    </div>
                                </div>
                </div>
            </div>

                        <button class="btn-tool me-2" onclick="auditContract()">
                            <span id="auditBtnText">
                                <i class="bi bi-shield-check me-1"></i>开始审计
                            </span>
                            <div id="auditLoading" class="loading-spinner" style="display: none;"></div>
                        </button>
                        
                        <button class="btn-outline" onclick="generateAuditReport()" id="reportBtn" style="display: none;">
                            <i class="bi bi-file-text me-1"></i>生成报告
                        </button>
                        
                        <div id="auditResult" class="result-section">
                            <div class="result-title">
                                <i class="bi bi-clipboard-data"></i>审计报告
                            </div>
                            <div id="auditResultContent"></div>
                            <div class="timestamp" id="auditTimestamp"></div>
                </div>
            </div>

                    <!-- 网络监控 -->
                    <div id="network-monitor-section" class="tool-section">
                        <h2 class="tool-section-title">
                            <i class="bi bi-activity"></i>
                            网络监控
                        </h2>
                        <div class="tool-description">
                            实时监控区块链网络状态，追踪异常交易模式和可疑活动，提供网络健康度报告。
                </div>
                        
                        <div class="form-group">
                            <label for="monitorType" class="form-label">监控类型</label>
                            <select class="form-select" id="monitorType">
                                <option value="realtime">实时监控</option>
                                <option value="threats">威胁监控</option>
                                <option value="transactions">交易监控</option>
                                <option value="network">网络状态</option>
                            </select>
            </div>

                        <button class="btn-tool" onclick="startMonitoring()">
                            <span id="monitorBtnText">开始监控</span>
                            <div id="monitorLoading" class="loading-spinner" style="display: none;"></div>
                        </button>
                        
                        <div id="monitorResult" class="result-section">
                            <div class="result-title">监控数据</div>
                            <div id="monitorResultContent"></div>
                            <div class="timestamp" id="monitorTimestamp"></div>
                </div>
            </div>

                    <!-- 威胁情报 -->
                    <div id="threat-intel-section" class="tool-section">
                        <h2 class="tool-section-title">
                            <i class="bi bi-exclamation-triangle"></i>
                            威胁情报
                        </h2>
                        <div class="tool-description">
                            获取最新的区块链安全威胁情报，包括新发现的恶意地址、攻击手法和防护建议。
            </div>

                        <div class="form-group">
                            <label for="threatType" class="form-label">情报类型</label>
                            <select class="form-select" id="threatType">
                                <option value="all">全部威胁</option>
                                <option value="phishing">钓鱼攻击</option>
                                <option value="malware">恶意软件</option>
                                <option value="scam">诈骗地址</option>
                                <option value="exploit">漏洞利用</option>
                            </select>
            </div>

                        <button class="btn-tool" onclick="getThreatIntel()">
                            <span id="threatBtnText">获取情报</span>
                            <div id="threatLoading" class="loading-spinner" style="display: none;"></div>
                        </button>
                        
                        <div id="threatResult" class="result-section">
                            <div class="result-title">威胁情报</div>
                            <div id="threatResultContent"></div>
                            <div class="timestamp" id="threatTimestamp"></div>
                </div>
            </div>

                    <!-- 安全报告生成 -->
                    <div id="report-generator-section" class="tool-section">
                        <h2 class="tool-section-title">
                            <i class="bi bi-file-text"></i>
                            安全报告生成
                        </h2>
                        <div class="tool-description">
                            基于检测结果生成专业的安全评估报告，支持多种格式导出，便于分享和存档。
        </div>
                        
                        <div class="form-group">
                            <label for="reportType" class="form-label">报告类型</label>
                            <select class="form-select" id="reportType">
                                <option value="comprehensive">综合安全报告</option>
                                <option value="risk">风险评估报告</option>
                                <option value="compliance">合规检查报告</option>
                                <option value="incident">事件分析报告</option>
                            </select>
    </div>

                        <div class="form-group">
                            <label for="reportPeriod" class="form-label">时间范围</label>
                            <select class="form-select" id="reportPeriod">
                                <option value="today">今日</option>
                                <option value="week">本周</option>
                                <option value="month">本月</option>
                                <option value="custom">自定义</option>
                            </select>
        </div>
                        
                        <button class="btn-tool" onclick="generateReport()">
                            <span id="reportBtnText">生成报告</span>
                            <div id="reportLoading" class="loading-spinner" style="display: none;"></div>
                        </button>
                        
                        <div id="reportResult" class="result-section">
                            <div class="result-title">报告预览</div>
                            <div id="reportResultContent"></div>
                            <div class="timestamp" id="reportTimestamp"></div>
        </div>
        </div>

                    <!-- 区块链取证 -->
                    <div id="forensic-analysis-section" class="tool-section">
                        <h2 class="tool-section-title">
                            <i class="bi bi-search"></i>
                            区块链取证
                        </h2>
                        <div class="tool-description">
                            深度分析区块链交易链路，追踪资金流向，为法律取证和合规调查提供专业支持。
        </div>
                        
                        <div class="form-group">
                            <label for="forensicAddress" class="form-label">目标地址</label>
                            <input type="text" class="form-control" id="forensicAddress" 
                                   placeholder="请输入要分析的区块链地址...">
    </div>

                    <div class="form-group">
                            <label for="forensicDepth" class="form-label">追踪深度</label>
                            <select class="form-select" id="forensicDepth">
                                <option value="3">3层关系</option>
                                <option value="5" selected>5层关系</option>
                                <option value="10">10层关系</option>
                                <option value="unlimited">不限制</option>
                            </select>
                        </div>
                        
                        <button class="btn-tool" onclick="startForensicAnalysis()">
                            <span id="forensicBtnText">开始取证分析</span>
                            <div id="forensicLoading" class="loading-spinner" style="display: none;"></div>
                        </button>
                        
                        <div id="forensicResult" class="result-section">
                            <div class="result-title">取证结果</div>
                            <div id="forensicResultContent"></div>
                            <div class="timestamp" id="forensicTimestamp"></div>
                        </div>
                    </div>

                    <!-- 钱包安全评估 -->
                    <div id="wallet-security-section" class="tool-section">
                        <h2 class="tool-section-title">
                            <i class="bi bi-wallet2"></i>
                            钱包安全评估
                        </h2>
                        <div class="tool-description">
                            全面评估数字钱包的安全状况，检测潜在风险，提供安全加固建议。
                    </div>
                    
                    <div class="form-group">
                            <label for="walletAddress" class="form-label">钱包地址</label>
                            <input type="text" class="form-control" id="walletAddress" 
                                   placeholder="请输入钱包地址进行安全评估...">
                    </div>

                    <div class="form-group">
                            <label for="assessmentType" class="form-label">评估类型</label>
                            <select class="form-select" id="assessmentType">
                                <option value="basic">基础安全检查</option>
                                <option value="comprehensive" selected>全面安全评估</option>
                                <option value="risk">风险专项分析</option>
                                <option value="compliance">合规性检查</option>
                        </select>
                    </div>

                        <button class="btn-tool" onclick="assessWalletSecurity()">
                            <span id="walletBtnText">开始评估</span>
                            <div id="walletLoading" class="loading-spinner" style="display: none;"></div>
                        </button>
                        
                        <div id="walletResult" class="result-section">
                            <div class="result-title">评估报告</div>
                            <div id="walletResultContent"></div>
                            <div class="timestamp" id="walletTimestamp"></div>
                    </div>
                        </div>

                    <!-- DApp安全扫描 -->
                    <div id="dapp-scanner-section" class="tool-section">
                        <h2 class="tool-section-title">
                            <i class="bi bi-globe"></i>
                            DApp安全扫描
                        </h2>
                        <div class="tool-description">
                            扫描去中心化应用的安全漏洞，检测智能合约风险，评估DApp整体安全性。
                    </div>
                    
                    <div class="form-group">
                            <label for="dappUrl" class="form-label">DApp地址</label>
                            <input type="url" class="form-control" id="dappUrl" 
                                   placeholder="请输入DApp的URL或合约地址...">
                    </div>

                    <div class="form-group">
                            <label for="scanScope" class="form-label">扫描范围</label>
                            <select class="form-select" id="scanScope">
                                <option value="frontend">前端安全</option>
                                <option value="contract">智能合约</option>
                                <option value="full" selected>全面扫描</option>
                                <option value="custom">自定义扫描</option>
                            </select>
                        </div>
                        
                        <button class="btn-tool" onclick="scanDApp()">
                            <span id="dappBtnText">开始扫描</span>
                            <div id="dappLoading" class="loading-spinner" style="display: none;"></div>
                        </button>
                        
                        <div id="dappResult" class="result-section">
                            <div class="result-title">扫描结果</div>
                            <div id="dappResultContent"></div>
                            <div class="timestamp" id="dappTimestamp"></div>
                    </div>
                            </div>
                        </div>
                        </div>
                    </div>
    </div>

    <!-- 加载导航栏组件 -->
    <script>
        fetch('navbar-component.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('navbar-placeholder').innerHTML = html;
                // 设置当前页面导航栏高亮
                setTimeout(() => {
                    const currentNavLink = document.querySelector('a[href="advanced-tools.html"]');
                    if (currentNavLink) {
                        // 移除所有其他页面的激活状态
                        document.querySelectorAll('.unified-nav-link').forEach(link => {
                            link.classList.remove('active');
                        });
                        // 设置当前页面为激活状态
                        currentNavLink.classList.add('active');
                    }
                }, 100);
            })
            .catch(error => console.error('导航栏加载失败:', error));
    </script>

    <!-- 背景动效脚本 -->
    <script>
        // 粒子效果
        function createParticles() {
            const particlesContainer = document.getElementById('particlesBg');
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 4 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // 区块链数据流
        function createDataStreams() {
            const streamsContainer = document.getElementById('blockchainStreams');
            const streamCount = 20;

            for (let i = 0; i < streamCount; i++) {
                const stream = document.createElement('div');
                stream.className = 'data-stream';
                stream.style.left = Math.random() * 100 + '%';
                stream.style.animationDelay = Math.random() * 8 + 's';
                stream.style.animationDuration = (Math.random() * 4 + 6) + 's';
                streamsContainer.appendChild(stream);
            }
        }

        // 初始化背景效果
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            createDataStreams();
        });
    </script>

    <!-- 主要功能脚本 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 批量地址检测
        async function runBatchCheck() {
            const addresses = document.getElementById('batchAddresses').value.trim();
            const btnText = document.getElementById('batchBtnText');
            const loading = document.getElementById('batchLoading');
            const resultDiv = document.getElementById('batchResult');
            const resultContent = document.getElementById('batchResultContent');
            const progressContainer = document.getElementById('batchProgress');
            const progressBar = document.getElementById('batchProgressBar');
            const progressText = document.getElementById('progressText');
            const timestamp = document.getElementById('batchTimestamp');
            const downloadBtn = document.getElementById('downloadBtn');

            if (!addresses) {
                alert('请输入要检测的地址列表');
                return;
            }

            const addressList = addresses.split('\n').filter(addr => addr.trim());

            btnText.style.display = 'none';
            loading.style.display = 'inline-block';
            progressContainer.style.display = 'block';

            let results = [];
            for (let i = 0; i < addressList.length; i++) {
                const progress = ((i + 1) / addressList.length) * 100;
                progressBar.style.width = progress + '%';

                // 模拟API调用
                await new Promise(resolve => setTimeout(resolve, 500));
                
                const riskLevel = Math.random() > 0.7 ? '高风险' : '低风险';
                results.push({
                    address: addressList[i].trim(),
                    risk: riskLevel,
                    score: Math.floor(Math.random() * 100)
                });
            }

            let resultHtml = '';
            results.forEach(result => {
                const riskClass = result.risk === '高风险' ? 'text-danger' : 'text-success';
                resultHtml += `
                    <div class="result-item">
                        <div class="d-flex justify-content-between">
                            <span class="text-truncate" style="max-width: 200px;">${result.address}</span>
                            <span class="${riskClass}">${result.risk} (${result.score})</span>
                        </div>
                    </div>
                `;
            });

            resultContent.innerHTML = resultHtml;
            timestamp.textContent = `检测完成时间: ${new Date().toLocaleString('zh-CN')}`;
            resultDiv.classList.add('show');

            btnText.style.display = 'inline';
            loading.style.display = 'none';
            progressContainer.style.display = 'none';
        }

        // AI助手功能
        function handleAIEnter(event) {
            if (event.key === 'Enter') {
                sendAIMessage();
            }
        }

        async function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            const chat = document.getElementById('aiChat');
            const btnText = document.getElementById('aiBtnText');
            const loading = document.getElementById('aiLoading');

            if (!message) return;

            // 添加用户消息
            chat.innerHTML += `
                <div class="chat-message user-message">
                    ${message}
                </div>
            `;
                
                input.value = '';
            btnText.style.display = 'none';
            loading.style.display = 'inline-block';

            // 模拟AI响应
            await new Promise(resolve => setTimeout(resolve, 1500));

            const responses = [
                '根据您的问题，我建议您首先检查地址的交易历史记录，重点关注大额转账和频繁交易模式。',
                '这是一个很好的安全问题。建议您使用我们的批量检测工具进行全面分析。',
                '从安全角度来看，建议您定期监控相关地址，并设置异常行为警报。',
                '基于当前的威胁情报，建议您避免与已知的恶意地址进行交互。',
                '这种情况通常需要进一步的合约代码审计，我可以为您提供详细的分析方案。'
            ];

            const aiResponse = responses[Math.floor(Math.random() * responses.length)];
            
            chat.innerHTML += `
                <div class="chat-message ai-message">
                    ${aiResponse}
                </div>
            `;

            chat.scrollTop = chat.scrollHeight;

            btnText.style.display = 'inline';
            loading.style.display = 'none';
        }

        // 合约审计
        async function auditContract() {
            const code = document.getElementById('contractCode').value.trim();
            const btnText = document.getElementById('auditBtnText');
            const loading = document.getElementById('auditLoading');
            const resultDiv = document.getElementById('auditResult');
            const resultContent = document.getElementById('auditResultContent');
            const timestamp = document.getElementById('auditTimestamp');

            if (!code) {
                alert('请输入要审计的合约代码');
                return;
            }

            btnText.style.display = 'none';
            loading.style.display = 'inline-block';

            await new Promise(resolve => setTimeout(resolve, 2000));

            const auditResults = [
                { type: '重入攻击风险', level: '中', description: '在withdraw函数中发现潜在的重入攻击风险' },
                { type: '整数溢出', level: '低', description: '建议使用SafeMath库防止整数溢出' },
                { type: '权限控制', level: '高', description: '缺少适当的访问控制修饰符' }
            ];

            let resultHtml = '';
            auditResults.forEach(result => {
                const levelClass = result.level === '高' ? 'text-danger' : 
                                  result.level === '中' ? 'text-warning' : 'text-success';
                resultHtml += `
                    <div class="result-item">
                        <div class="d-flex justify-content-between mb-2">
                            <strong>${result.type}</strong>
                            <span class="${levelClass}">${result.level}风险</span>
                        </div>
                        <p class="mb-0 text-secondary">${result.description}</p>
                    </div>
                `;
            });

            resultContent.innerHTML = resultHtml;
            timestamp.textContent = `审计完成时间: ${new Date().toLocaleString('zh-CN')}`;
            resultDiv.classList.add('show');

            btnText.style.display = 'inline';
            loading.style.display = 'none';
        }

        // 网络监控
        async function startMonitoring() {
            const type = document.getElementById('monitorType').value;
            const btnText = document.getElementById('monitorBtnText');
            const loading = document.getElementById('monitorLoading');
            const resultDiv = document.getElementById('monitorResult');
            const resultContent = document.getElementById('monitorResultContent');
            const timestamp = document.getElementById('monitorTimestamp');

            btnText.style.display = 'none';
            loading.style.display = 'inline-block';

            await new Promise(resolve => setTimeout(resolve, 1500));

            const monitorData = {
                blockHeight: (19800000 + Math.floor(Math.random() * 1000)).toLocaleString(),
                txCount: Math.floor(Math.random() * 1000 + 500).toLocaleString(),
                gasPrice: Math.floor(Math.random() * 50 + 20),
                threatCount: Math.floor(Math.random() * 10 + 1)
            };

            const resultHtml = `
                <div class="result-item">
                    <strong>当前区块高度:</strong> ${monitorData.blockHeight}
                </div>
                <div class="result-item">
                    <strong>交易数量:</strong> ${monitorData.txCount}
                </div>
                <div class="result-item">
                    <strong>Gas价格:</strong> ${monitorData.gasPrice} Gwei
                </div>
                <div class="result-item">
                    <strong>检测到威胁:</strong> <span class="text-warning">${monitorData.threatCount}</span>
                </div>
            `;

            resultContent.innerHTML = resultHtml;
            timestamp.textContent = `监控时间: ${new Date().toLocaleString('zh-CN')}`;
            resultDiv.classList.add('show');

            btnText.style.display = 'inline';
            loading.style.display = 'none';
        }

        // 威胁情报
        async function getThreatIntel() {
            const type = document.getElementById('threatType').value;
            const btnText = document.getElementById('threatBtnText');
            const loading = document.getElementById('threatLoading');
            const resultDiv = document.getElementById('threatResult');
            const resultContent = document.getElementById('threatResultContent');
            const timestamp = document.getElementById('threatTimestamp');

            btnText.style.display = 'none';
            loading.style.display = 'inline-block';

            await new Promise(resolve => setTimeout(resolve, 1000));

            const threats = [
                { type: '钓鱼网站', level: '高', description: '发现新的仿冒MetaMask钓鱼网站' },
                { type: '恶意合约', level: '中', description: '检测到可疑的代币合约，存在后门功能' },
                { type: '诈骗地址', level: '高', description: '发现批量创建的诈骗地址群' }
            ];

            let resultHtml = '';
            threats.forEach(threat => {
                const levelClass = threat.level === '高' ? 'text-danger' : 'text-warning';
                resultHtml += `
                    <div class="result-item">
                        <div class="d-flex justify-content-between mb-2">
                            <strong>${threat.type}</strong>
                            <span class="${levelClass}">${threat.level}风险</span>
                        </div>
                        <p class="mb-0 text-secondary">${threat.description}</p>
                    </div>
                `;
            });

            resultContent.innerHTML = resultHtml;
            timestamp.textContent = `情报更新时间: ${new Date().toLocaleString('zh-CN')}`;
            resultDiv.classList.add('show');

            btnText.style.display = 'inline';
            loading.style.display = 'none';
        }

        // 报告生成
        async function generateReport() {
            const type = document.getElementById('reportType').value;
            const period = document.getElementById('reportPeriod').value;
            const btnText = document.getElementById('reportBtnText');
            const loading = document.getElementById('reportLoading');
            const resultDiv = document.getElementById('reportResult');
            const resultContent = document.getElementById('reportResultContent');
            const timestamp = document.getElementById('reportTimestamp');

            btnText.style.display = 'none';
            loading.style.display = 'inline-block';

            await new Promise(resolve => setTimeout(resolve, 2500));

            const reportData = {
                totalScans: Math.floor(Math.random() * 1000 + 500),
                threatsFound: Math.floor(Math.random() * 50 + 10),
                riskScore: Math.floor(Math.random() * 30 + 70),
                recommendations: [
                    '建议加强对高风险地址的监控',
                    '定期更新威胁情报数据库',
                    '提高用户安全意识培训'
                ]
            };

            let recHtml = '';
            reportData.recommendations.forEach(rec => {
                recHtml += `<div class="result-item">${rec}</div>`;
            });

            const resultHtml = `
                <div class="result-item">
                    <strong>扫描总数:</strong> ${reportData.totalScans.toLocaleString()}
                </div>
                <div class="result-item">
                    <strong>发现威胁:</strong> <span class="text-warning">${reportData.threatsFound}</span>
                </div>
                <div class="result-item">
                    <strong>安全评分:</strong> <span class="text-success">${reportData.riskScore}/100</span>
                </div>
                <div style="margin-top: 1rem;">
                    <strong>安全建议:</strong>
                    ${recHtml}
                </div>
            `;

            resultContent.innerHTML = resultHtml;
            timestamp.textContent = `报告生成时间: ${new Date().toLocaleString('zh-CN')}`;
            resultDiv.classList.add('show');

            btnText.style.display = 'inline';
            loading.style.display = 'none';
        }

        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 检查登录状态
            const isLoggedIn = localStorage.getItem('ethersent_logged_in') || 
                              sessionStorage.getItem('ethersent_logged_in');
            
            if (isLoggedIn !== 'true') {
                window.location.href = 'auth.html';
                return;
            }
            
            // 初始化工具导航
            initToolNavigation();
            
            // 初始化增强粒子系统
            initAdvancedCanvasParticles();
            initMouseInteraction();
            initTooltips();
            
            // 为所有工具按钮添加使用跟踪
            document.querySelectorAll('.btn-tool').forEach(btn => {
                btn.addEventListener('click', function() {
                    const toolSection = this.closest('.tool-section');
                    const toolName = toolSection.querySelector('.tool-section-title').textContent.trim();
                    trackToolUsage(toolName);
                });
            });
            
            // 显示工具使用统计
            displayToolUsageStats();
        });

        // 初始化工具导航
        function initToolNavigation() {
            document.querySelectorAll('.tool-menu-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // 移除所有活跃状态
                    document.querySelectorAll('.tool-menu-link').forEach(l => l.classList.remove('active'));
                    document.querySelectorAll('.tool-section').forEach(s => s.classList.remove('active'));
                    
                    // 隐藏所有结果区域
                    document.querySelectorAll('.result-section').forEach(r => r.classList.remove('show'));
                    
                    // 添加当前活跃状态
                    this.classList.add('active');
                    const toolId = this.getAttribute('data-tool') + '-section';
                    const targetSection = document.getElementById(toolId);
                    if (targetSection) {
                        targetSection.classList.add('active');
                    }
                    
                    // 平滑滚动到内容区域（移动端优化）
                    if (window.innerWidth <= 768) {
                        document.querySelector('.tool-content-area').scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        }

        // 显示工具使用统计
        function displayToolUsageStats() {
            const usage = JSON.parse(localStorage.getItem('tool_usage') || '{}');
            if (Object.keys(usage).length > 0) {
                console.log('工具使用统计:', usage);
                
                // 在页面顶部显示最常用的工具
                const mostUsedTool = Object.entries(usage).reduce((a, b) => usage[a[0]] > usage[b[0]] ? a : b);
                if (mostUsedTool) {
                    const statsDiv = document.createElement('div');
                    statsDiv.className = 'alert alert-info mt-3';
                    statsDiv.style.cssText = `
                        background: rgba(0, 255, 204, 0.1);
                        border: 1px solid rgba(0, 255, 204, 0.3);
                        color: #00ffcc;
                        text-align: center;
                    `;
                    statsDiv.innerHTML = `
                        <i class="bi bi-star-fill me-2"></i>
                        最常用工具: ${mostUsedTool[0]} (已使用 ${mostUsedTool[1]} 次)
                    `;
                    
                    const pageHeader = document.querySelector('.page-header');
                    if (pageHeader) {
                        pageHeader.appendChild(statsDiv);
                    }
                }
            }
        }

        // 增强的Canvas粒子系统
        function initAdvancedCanvasParticles() {
            const canvas = document.createElement('canvas');
            canvas.style.position = 'fixed';
            canvas.style.top = '0';
            canvas.style.left = '0';
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            canvas.style.zIndex = '-1';
            canvas.style.pointerEvents = 'none';
            document.body.appendChild(canvas);

            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            const particleCount = 100;

            // 增强粒子类
            class BlockchainParticle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.vx = (Math.random() - 0.5) * 2;
                    this.vy = (Math.random() - 0.5) * 2;
                    this.radius = Math.random() * 4 + 1;
                    this.alpha = Math.random() * 0.8 + 0.2;
                    this.type = Math.random() < 0.6 ? 'normal' : 'node';
                    this.pulse = Math.random() * Math.PI * 2;
                    this.connections = [];
                    this.energy = Math.random() * 100;
                }

                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    this.pulse += 0.03;
                    this.energy += 0.5;

                    // 边界处理
                    if (this.x < 0 || this.x > canvas.width) {
                        this.vx *= -1;
                        this.x = Math.max(0, Math.min(canvas.width, this.x));
                    }
                    if (this.y < 0 || this.y > canvas.height) {
                        this.vy *= -1;
                        this.y = Math.max(0, Math.min(canvas.height, this.y));
                    }
                }

                draw() {
                    ctx.save();
                    
                    if (this.type === 'node') {
                        // 区块链节点样式
                        const pulseSize = this.radius + Math.sin(this.pulse) * 2;
                        
                        // 外圈能量环
                        const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, pulseSize * 4);
                        gradient.addColorStop(0, `rgba(0, 255, 204, ${this.alpha * 0.4})`);
                        gradient.addColorStop(0.3, `rgba(0, 212, 255, ${this.alpha * 0.2})`);
                        gradient.addColorStop(0.7, `rgba(57, 255, 20, ${this.alpha * 0.1})`);
                        gradient.addColorStop(1, 'rgba(0, 255, 204, 0)');
                        
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, pulseSize * 4, 0, Math.PI * 2);
                        ctx.fillStyle = gradient;
                        ctx.fill();
                    
                        // 主节点
                    ctx.beginPath();
                        ctx.arc(this.x, this.y, pulseSize, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(0, 255, 204, ${this.alpha})`;
                    ctx.fill();
                    
                        // 核心
                    ctx.beginPath();
                        ctx.arc(this.x, this.y, pulseSize * 0.4, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(255, 255, 255, ${this.alpha})`;
                    ctx.fill();
                        
                        // 数据流动效果
                        const dataFlowRadius = pulseSize * 2;
                        for (let i = 0; i < 3; i++) {
                            const angle = (this.energy * 0.02 + i * (Math.PI * 2 / 3)) % (Math.PI * 2);
                            const dataX = this.x + Math.cos(angle) * dataFlowRadius;
                            const dataY = this.y + Math.sin(angle) * dataFlowRadius;
                            
                            ctx.beginPath();
                            ctx.arc(dataX, dataY, 1, 0, Math.PI * 2);
                            ctx.fillStyle = `rgba(57, 255, 20, ${this.alpha * 0.6})`;
                            ctx.fill();
                        }
                    } else {
                        // 普通粒子
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                        const colors = [
                            `rgba(0, 255, 204, ${this.alpha})`,
                            `rgba(0, 212, 255, ${this.alpha})`,
                            `rgba(57, 255, 20, ${this.alpha})`,
                            `rgba(138, 43, 226, ${this.alpha})`
                        ];
                        ctx.fillStyle = colors[Math.floor(Math.random() * colors.length)];
                        ctx.fill();
                        
                        // 粒子尾迹
                        ctx.beginPath();
                        ctx.arc(this.x - this.vx * 3, this.y - this.vy * 3, this.radius * 0.5, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(0, 255, 204, ${this.alpha * 0.3})`;
                        ctx.fill();
                    }
                    
                    ctx.restore();
                }
            }

            // 初始化粒子
            for (let i = 0; i < particleCount; i++) {
                particles.push(new BlockchainParticle());
            }

            // 绘制连接网络
            function drawNetwork() {
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 150) {
                            const opacity = (150 - distance) / 150 * 0.4;
                            
                            // 动态连接线
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            
                            if (particles[i].type === 'node' || particles[j].type === 'node') {
                            ctx.strokeStyle = `rgba(0, 255, 204, ${opacity})`;
                                ctx.lineWidth = 2;
                            } else {
                                ctx.strokeStyle = `rgba(0, 212, 255, ${opacity * 0.6})`;
                                ctx.lineWidth = 1;
                            }
                            ctx.stroke();
                            
                            // 数据传输效果
                            if (Math.random() < 0.01) {
                                const midX = (particles[i].x + particles[j].x) / 2;
                                const midY = (particles[i].y + particles[j].y) / 2;
                                ctx.beginPath();
                                ctx.arc(midX, midY, 2, 0, Math.PI * 2);
                                ctx.fillStyle = `rgba(57, 255, 20, ${opacity})`;
                                ctx.fill();
                            }
                        }
                    }
                }
            }

            // 区块链哈希波效果
            function drawHashWaves() {
                const time = Date.now() * 0.002;
                
                for (let i = 0; i < 3; i++) {
                    const waveY = 100 + i * 200 + Math.sin(time + i) * 50;
                    
                    ctx.save();
                    ctx.globalAlpha = 0.3;
                    ctx.strokeStyle = 'rgba(0, 255, 204, 0.5)';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    
                    for (let x = 0; x <= canvas.width; x += 10) {
                        const y = waveY + Math.sin(x * 0.01 + time) * 30;
                        if (x === 0) {
                            ctx.moveTo(x, y);
                        } else {
                            ctx.lineTo(x, y);
                        }
                    }
                    ctx.stroke();
                    ctx.restore();
                }
            }

            // 动画循环
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // 绘制哈希波
                drawHashWaves();
                
                // 更新和绘制粒子
                particles.forEach(particle => {
                    particle.update();
                    particle.draw();
                });
                
                // 绘制网络连接
                drawNetwork();
                
                requestAnimationFrame(animate);
            }
            
            animate();
            
            // 响应窗口大小变化
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // 鼠标交互增强
        function initMouseInteraction() {
            let mouseX = 0;
            let mouseY = 0;
            
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                
                // 创建鼠标轨迹区块链粒子
                if (Math.random() < 0.05) {
                    createBlockchainTrail(mouseX, mouseY);
                }
            });
        }

        function createBlockchainTrail(x, y) {
            const trail = document.createElement('div');
            trail.style.position = 'fixed';
            trail.style.left = x + 'px';
            trail.style.top = y + 'px';
            trail.style.width = '6px';
            trail.style.height = '6px';
            trail.style.background = 'radial-gradient(circle, rgba(0, 255, 204, 0.8) 0%, transparent 70%)';
            trail.style.borderRadius = '50%';
            trail.style.pointerEvents = 'none';
            trail.style.zIndex = '1000';
            trail.style.transition = 'all 1s ease-out';
            trail.style.boxShadow = '0 0 10px rgba(0, 255, 204, 0.6)';
            document.body.appendChild(trail);
            
            setTimeout(() => {
                trail.style.opacity = '0';
                trail.style.transform = 'scale(0) rotate(180deg)';
                setTimeout(() => {
                    if (trail.parentNode) {
                        trail.parentNode.removeChild(trail);
                    }
                }, 1000);
            }, 50);
        }

        // 实时更新威胁数据
        setInterval(updateRealTimeData, 30000); // 每30秒更新一次

        // 区块链取证分析
        async function startForensicAnalysis() {
            const address = document.getElementById('forensicAddress').value.trim();
            const depth = document.getElementById('forensicDepth').value;
            const btnText = document.getElementById('forensicBtnText');
            const loading = document.getElementById('forensicLoading');
            const resultDiv = document.getElementById('forensicResult');
            const resultContent = document.getElementById('forensicResultContent');
            const timestamp = document.getElementById('forensicTimestamp');

            if (!address) {
                alert('请输入要分析的区块链地址');
                return;
            }

            btnText.style.display = 'none';
            loading.style.display = 'inline-block';

            await new Promise(resolve => setTimeout(resolve, 3000));

            const forensicData = {
                address: address,
                depth: depth,
                totalTransactions: Math.floor(Math.random() * 5000 + 1000),
                suspiciousTransactions: Math.floor(Math.random() * 50 + 5),
                connectedAddresses: Math.floor(Math.random() * 200 + 50),
                riskLevel: Math.random() > 0.3 ? '中风险' : '高风险',
                fundFlow: [
                    { direction: '流入', amount: '$' + (Math.random() * 100000 + 10000).toFixed(2), count: Math.floor(Math.random() * 100 + 20) },
                    { direction: '流出', amount: '$' + (Math.random() * 80000 + 8000).toFixed(2), count: Math.floor(Math.random() * 80 + 15) }
                ],
                suspiciousPatterns: [
                    '检测到频繁小额转账模式',
                    '发现与已知恶意地址的交互',
                    '存在异常时间间隔的大额转账'
                ]
            };

            let resultHtml = `
                <div class="result-item">
                    <strong>目标地址:</strong> ${forensicData.address}
                </div>
                <div class="result-item">
                    <strong>交易总数:</strong> ${forensicData.totalTransactions.toLocaleString()}
                </div>
                <div class="result-item">
                    <strong>可疑交易:</strong> <span class="text-warning">${forensicData.suspiciousTransactions}</span>
                </div>
                <div class="result-item">
                    <strong>关联地址:</strong> ${forensicData.connectedAddresses}
                </div>
                <div class="result-item">
                    <strong>风险等级:</strong> <span class="${forensicData.riskLevel === '高风险' ? 'text-danger' : 'text-warning'}">${forensicData.riskLevel}</span>
                </div>
                <div style="margin-top: 1rem;">
                    <strong>资金流向分析:</strong>
                    ${forensicData.fundFlow.map(flow => 
                        `<div class="result-item">${flow.direction}: ${flow.amount} (${flow.count}笔)</div>`
                    ).join('')}
                </div>
                <div style="margin-top: 1rem;">
                    <strong>可疑模式:</strong>
                    ${forensicData.suspiciousPatterns.map(pattern => 
                        `<div class="result-item text-warning">${pattern}</div>`
                    ).join('')}
                </div>
            `;

            resultContent.innerHTML = resultHtml;
            timestamp.textContent = `分析完成时间: ${new Date().toLocaleString('zh-CN')}`;
            resultDiv.classList.add('show');

            btnText.style.display = 'inline';
            loading.style.display = 'none';
        }

        // 钱包安全评估
        async function assessWalletSecurity() {
            const address = document.getElementById('walletAddress').value.trim();
            const type = document.getElementById('assessmentType').value;
            const btnText = document.getElementById('walletBtnText');
            const loading = document.getElementById('walletLoading');
            const resultDiv = document.getElementById('walletResult');
            const resultContent = document.getElementById('walletResultContent');
            const timestamp = document.getElementById('walletTimestamp');

            if (!address) {
                alert('请输入钱包地址');
                return;
            }

            btnText.style.display = 'none';
            loading.style.display = 'inline-block';

            await new Promise(resolve => setTimeout(resolve, 2500));

            const securityScore = Math.floor(Math.random() * 40 + 60); // 60-100分
            const assessmentResult = {
                address: address,
                securityScore: securityScore,
                riskLevel: securityScore >= 85 ? '低风险' : securityScore >= 70 ? '中风险' : '高风险',
                strengths: [
                    '使用了多重签名机制',
                    '定期更换接收地址',
                    '交易模式规律正常'
                ],
                vulnerabilities: securityScore < 85 ? [
                    '存在大额资金集中风险',
                    '与未验证地址有交互',
                    '缺少冷钱包隔离机制'
                ] : [],
                recommendations: [
                    '建议启用双因素认证',
                    '定期备份私钥和助记词',
                    '使用硬件钱包存储大额资金',
                    '避免在公共网络进行交易'
                ]
            };

            let vulnHtml = '';
            if (assessmentResult.vulnerabilities.length > 0) {
                vulnHtml = `
                    <div style="margin-top: 1rem;">
                        <strong class="text-warning">发现的安全问题:</strong>
                        ${assessmentResult.vulnerabilities.map(vuln => 
                            `<div class="result-item text-warning">${vuln}</div>`
                        ).join('')}
                    </div>
                `;
            }

            const resultHtml = `
                <div class="result-item">
                    <strong>安全评分:</strong> 
                    <span class="${assessmentResult.riskLevel === '低风险' ? 'text-success' : 
                                   assessmentResult.riskLevel === '中风险' ? 'text-warning' : 'text-danger'}">
                        ${assessmentResult.securityScore}/100 (${assessmentResult.riskLevel})
                    </span>
                </div>
                <div style="margin-top: 1rem;">
                    <strong class="text-success">安全优势:</strong>
                    ${assessmentResult.strengths.map(strength => 
                        `<div class="result-item text-success">${strength}</div>`
                    ).join('')}
                </div>
                ${vulnHtml}
                <div style="margin-top: 1rem;">
                    <strong class="text-info">安全建议:</strong>
                    ${assessmentResult.recommendations.map(rec => 
                        `<div class="result-item">${rec}</div>`
                    ).join('')}
                </div>
            `;

            resultContent.innerHTML = resultHtml;
            timestamp.textContent = `评估完成时间: ${new Date().toLocaleString('zh-CN')}`;
            resultDiv.classList.add('show');

            btnText.style.display = 'inline';
            loading.style.display = 'none';
        }

        // DApp安全扫描
        async function scanDApp() {
            const url = document.getElementById('dappUrl').value.trim();
            const scope = document.getElementById('scanScope').value;
            const btnText = document.getElementById('dappBtnText');
            const loading = document.getElementById('dappLoading');
            const resultDiv = document.getElementById('dappResult');
            const resultContent = document.getElementById('dappResultContent');
            const timestamp = document.getElementById('dappTimestamp');

            if (!url) {
                alert('请输入DApp地址');
                return;
            }

            btnText.style.display = 'none';
            loading.style.display = 'inline-block';

            await new Promise(resolve => setTimeout(resolve, 4000));

            const scanResults = {
                url: url,
                scope: scope,
                overallScore: Math.floor(Math.random() * 30 + 70),
                vulnerabilities: [
                    { level: '高', type: '智能合约重入攻击风险', description: '合约中存在潜在的重入攻击漏洞' },
                    { level: '中', type: 'XSS跨站脚本', description: '前端页面存在XSS攻击风险' },
                    { level: '低', type: '信息泄露', description: '敏感信息可能在前端暴露' }
                ],
                contractAnalysis: {
                    totalContracts: Math.floor(Math.random() * 10 + 3),
                    verifiedContracts: Math.floor(Math.random() * 8 + 2),
                    gasOptimization: Math.random() > 0.5 ? '良好' : '需要优化',
                    upgradeability: Math.random() > 0.5 ? '支持' : '不支持'
                },
                securityFeatures: [
                    'SSL/TLS加密传输',
                    '智能合约代码开源',
                    '多重签名钱包集成'
                ]
            };

            const resultHtml = `
                <div class="result-item">
                    <strong>整体安全评分:</strong> 
                    <span class="${scanResults.overallScore >= 85 ? 'text-success' : 
                                   scanResults.overallScore >= 70 ? 'text-warning' : 'text-danger'}">
                        ${scanResults.overallScore}/100
                    </span>
                </div>
                <div style="margin-top: 1rem;">
                    <strong>智能合约分析:</strong>
                    <div class="result-item">合约总数: ${scanResults.contractAnalysis.totalContracts}</div>
                    <div class="result-item">已验证合约: ${scanResults.contractAnalysis.verifiedContracts}</div>
                    <div class="result-item">Gas优化: ${scanResults.contractAnalysis.gasOptimization}</div>
                    <div class="result-item">可升级性: ${scanResults.contractAnalysis.upgradeability}</div>
                </div>
                <div style="margin-top: 1rem;">
                    <strong class="text-warning">发现的漏洞:</strong>
                    ${scanResults.vulnerabilities.map(vuln => `
                        <div class="result-item">
                            <span class="${vuln.level === '高' ? 'text-danger' : 
                                           vuln.level === '中' ? 'text-warning' : 'text-info'}">[${vuln.level}]</span>
                            ${vuln.type}: ${vuln.description}
                        </div>
                    `).join('')}
                </div>
                <div style="margin-top: 1rem;">
                    <strong class="text-success">安全特性:</strong>
                    ${scanResults.securityFeatures.map(feature => 
                        `<div class="result-item text-success">${feature}</div>`
                    ).join('')}
                </div>
            `;

            resultContent.innerHTML = resultHtml;
            timestamp.textContent = `扫描完成时间: ${new Date().toLocaleString('zh-CN')}`;
            resultDiv.classList.add('show');

            btnText.style.display = 'inline';
            loading.style.display = 'none';
        }

        // 增强工具提示功能
        function initTooltips() {
            // 为所有工具卡片添加详细说明提示
            const toolCards = document.querySelectorAll('.tool-card');
            toolCards.forEach(card => {
                const title = card.querySelector('.tool-title').textContent;
                card.title = `点击使用 ${title} 工具`;
                
                // 添加工具卡片悬停效果
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
        }

        // 数据统计功能
        function trackToolUsage(toolName) {
            const usage = JSON.parse(localStorage.getItem('tool_usage') || '{}');
            usage[toolName] = (usage[toolName] || 0) + 1;
            localStorage.setItem('tool_usage', JSON.stringify(usage));
            
            // 显示使用统计
            console.log(`${toolName} 工具使用次数: ${usage[toolName]}`);
        }

        // 实时数据更新功能
        function updateRealTimeData() {
            // 更新页面上的实时数据显示
            const now = new Date();
            document.querySelectorAll('.timestamp').forEach(element => {
                if (element.textContent.includes('时间:')) {
                    // 可以在这里添加实时数据更新逻辑
                }
            });
        }
    </script>
</body>
</html> 